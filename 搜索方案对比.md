# ğŸ” æœç´¢æ–¹æ¡ˆå¯¹æ¯”ï¼šSupabase vs Algolia

## ğŸ“Š æ–¹æ¡ˆå¯¹æ¯”æ¦‚è§ˆ

| å¯¹æ¯”é¡¹ | Supabase å…¨æ–‡æœç´¢ | Algolia |
|--------|-------------------|---------|
| **æˆæœ¬** | ğŸŸ¢ å…è´¹ï¼ˆåŒ…å«åœ¨ Supabase å¥—é¤ä¸­ï¼‰ | ğŸ”´ ä»˜è´¹ï¼ˆå…è´¹é¢åº¦ 10K æœç´¢/æœˆï¼‰ |
| **æœç´¢é€Ÿåº¦** | ğŸŸ¡ è¾ƒå¿«ï¼ˆ~50-200msï¼‰ | ğŸŸ¢ æå¿«ï¼ˆ~5-20msï¼‰ |
| **æœç´¢è´¨é‡** | ğŸŸ¡ åŸºç¡€å…¨æ–‡æœç´¢ | ğŸŸ¢ é«˜çº§æœç´¢ï¼ˆæ‹¼å†™çº é”™ã€åŒä¹‰è¯ï¼‰ |
| **å®æ—¶æ€§** | ğŸŸ¢ å³æ—¶æ›´æ–° | ğŸŸ¡ éœ€è¦ç´¢å¼•åŒæ­¥ |
| **é…ç½®éš¾åº¦** | ğŸŸ¢ ç®€å•ï¼ˆSQL é…ç½®ï¼‰ | ğŸŸ¡ ä¸­ç­‰ï¼ˆéœ€é…ç½®ç´¢å¼•ï¼‰ |
| **ä¸­æ–‡æ”¯æŒ** | ğŸŸ¡ æ”¯æŒä½†åŸºç¡€ | ğŸŸ¢ ä¼˜ç§€ï¼ˆåˆ†è¯ã€æ‹¼éŸ³ï¼‰ |
| **æ•°æ®ä¸€è‡´æ€§** | ğŸŸ¢ å®Œç¾ï¼ˆåŒä¸€æ•°æ®åº“ï¼‰ | ğŸŸ¡ éœ€è¦åŒæ­¥æœºåˆ¶ |
| **æœç´¢åŠŸèƒ½** | ğŸŸ¡ åŸºç¡€ | ğŸŸ¢ é«˜çº§ï¼ˆfacetã€filterã€æ’åºï¼‰ |
| **é€‚ç”¨åœºæ™¯** | ğŸŸ¢ ä¸­å°å‹åšå®¢ | ğŸŸ¢ å¤§å‹ç½‘ç«™ã€ç”µå•† |

---

## ğŸ’° æˆæœ¬å¯¹æ¯”

### Supabase å…¨æ–‡æœç´¢

**å…è´¹é¢åº¦**ï¼š
- âœ… 500MB æ•°æ®åº“ç©ºé—´
- âœ… æ— é™åˆ¶çš„æœç´¢è¯·æ±‚
- âœ… åŒ…å«åœ¨å…è´¹å¥—é¤ä¸­

**Pro å¥—é¤**ï¼ˆ$25/æœˆï¼‰ï¼š
- 8GB æ•°æ®åº“ç©ºé—´
- 100GB å¸¦å®½
- é€‚åˆå¤§å¤šæ•°åšå®¢

**æ€»ç»“**ï¼šå¯¹äºä¸ªäººåšå®¢ï¼Œ**å®Œå…¨å…è´¹**

---

### Algolia

**å…è´¹é¢åº¦**ï¼š
- âš ï¸ 10,000 æ¬¡æœç´¢/æœˆ
- âš ï¸ 10,000 æ¡è®°å½•
- âš ï¸ æœ‰ Algolia Logo

**ä»˜è´¹å¥—é¤**ï¼š
- **Essential**ï¼š$1/1,000 æ¬¡æœç´¢ï¼ˆçº¦ Â¥300-500/æœˆï¼‰
- **Advanced**ï¼š$2/1,000 æ¬¡æœç´¢
- è¶…è¿‡å…è´¹é¢åº¦åè´¹ç”¨å¿«é€Ÿå¢é•¿

**ç¤ºä¾‹æˆæœ¬**ï¼š
```
å‡è®¾ä½ çš„åšå®¢æ¯æœˆ 50,000 æ¬¡æœç´¢ï¼š
Supabase: $0
Algolia: $80-100/æœˆï¼ˆçº¦ Â¥560-700ï¼‰
```

**æ€»ç»“**ï¼šå¯¹äºæµé‡è¾ƒå¤§çš„ç½‘ç«™ï¼Œ**æˆæœ¬è¾ƒé«˜**

---

## âš¡ æ€§èƒ½å¯¹æ¯”

### æœç´¢é€Ÿåº¦

#### Supabase
```
å…¸å‹å“åº”æ—¶é—´ï¼š50-200ms
- æ•°æ®åº“æŸ¥è¯¢ï¼š20-50ms
- ç½‘ç»œå»¶è¿Ÿï¼š30-150ms
- é€‚åˆï¼šä¸­å°å‹å†…å®¹åº“ï¼ˆ< 10ä¸‡ç¯‡æ–‡ç« ï¼‰
```

#### Algolia
```
å…¸å‹å“åº”æ—¶é—´ï¼š5-20ms
- CDN è¾¹ç¼˜èŠ‚ç‚¹
- é¢„æ„å»ºç´¢å¼•
- é€‚åˆï¼šä»»ä½•è§„æ¨¡çš„å†…å®¹åº“
```

**ç»“è®º**ï¼šAlgolia å¿« **5-10 å€**ï¼Œä½†å¯¹äºåšå®¢æœç´¢ï¼ŒSupabase çš„é€Ÿåº¦**å®Œå…¨å¤Ÿç”¨**ã€‚

---

## ğŸ¯ åŠŸèƒ½å¯¹æ¯”

### Supabase å…¨æ–‡æœç´¢

#### âœ… ä¼˜åŠ¿

**1. å¼€ç®±å³ç”¨**
```sql
-- åªéœ€ç®€å•çš„ SQL é…ç½®
CREATE INDEX idx_articles_search 
ON articles 
USING GIN (to_tsvector('english', title || ' ' || content));

-- ç«‹å³å¯ä»¥æœç´¢
SELECT * FROM articles
WHERE to_tsvector('english', title || ' ' || content) 
      @@ plainto_tsquery('english', 'search term');
```

**2. æ•°æ®ä¸€è‡´æ€§**
- æ•°æ®å’Œæœç´¢åœ¨åŒä¸€æ•°æ®åº“
- æ— éœ€åŒæ­¥æœºåˆ¶
- å®æ—¶æ›´æ–°

**3. å¤æ‚æŸ¥è¯¢**
```sql
-- å¯ä»¥ç»“åˆå…¶ä»– SQL åŠŸèƒ½
SELECT * FROM articles
WHERE to_tsvector('english', content) @@ plainto_tsquery('english', 'astro')
  AND created_at > '2024-01-01'
  AND category = 'tutorial'
ORDER BY views DESC
LIMIT 10;
```

**4. å…è´¹æ— é™åˆ¶**
- æ— æœç´¢æ¬¡æ•°é™åˆ¶
- æ— è®°å½•æ•°é™åˆ¶

#### âŒ å±€é™æ€§

**1. æœç´¢è´¨é‡ä¸€èˆ¬**
- æ— æ‹¼å†™çº é”™
- æ— åŒä¹‰è¯æ”¯æŒ
- ä¸­æ–‡åˆ†è¯åŸºç¡€

**2. ç›¸å…³æ€§æ’åºè¾ƒå¼±**
```sql
-- åªèƒ½æŒ‰æƒé‡æ’åºï¼Œä¸å¦‚ Algolia æ™ºèƒ½
SELECT *, ts_rank(to_tsvector('english', content), query) as rank
FROM articles, plainto_tsquery('english', 'term') query
ORDER BY rank DESC;
```

**3. UI éœ€è¦è‡ªå·±å®ç°**
- éœ€è¦è‡ªå·±å†™å‰ç«¯æœç´¢ç»„ä»¶
- æ— ç°æˆçš„æœç´¢å»ºè®®
- æ— é«˜äº®åŠŸèƒ½ï¼ˆéœ€è‡ªå·±å®ç°ï¼‰

---

### Algolia

#### âœ… ä¼˜åŠ¿

**1. æé€Ÿæœç´¢ä½“éªŒ**
```javascript
// è¾“å…¥å³æœç´¢ï¼ˆ< 20msï¼‰
searchClient.search('astro', {
  hitsPerPage: 10
});
```

**2. é«˜çº§æœç´¢åŠŸèƒ½**

**æ‹¼å†™çº é”™**ï¼š
```
ç”¨æˆ·è¾“å…¥ï¼šastrroï¼ˆé”™è¯¯ï¼‰
Algoliaï¼šæ˜¾ç¤º "astro" çš„ç»“æœ
```

**åŒä¹‰è¯æ”¯æŒ**ï¼š
```
æœç´¢ï¼šå‰ç«¯
ä¹ŸåŒ¹é…ï¼šfrontend, å‰ç«¯å¼€å‘, web
```

**Faceted Search**ï¼ˆåˆ†é¢æœç´¢ï¼‰ï¼š
```javascript
// æŒ‰åˆ†ç±»ã€æ ‡ç­¾ã€æ—¥æœŸç­‰ç­›é€‰
{
  facets: ['category', 'tags', 'year'],
  filters: 'category:tutorial AND year:2024'
}
```

**3. ä¼˜ç§€çš„ UI ç»„ä»¶**
```javascript
// InstantSearch.js - å¼€ç®±å³ç”¨
import { InstantSearch, SearchBox, Hits } from 'react-instantsearch';

// å‡ è¡Œä»£ç å°±æœ‰å®Œæ•´æœç´¢ç•Œé¢
<InstantSearch searchClient={searchClient} indexName="articles">
  <SearchBox />
  <Hits />
</InstantSearch>
```

**4. ä¸­æ–‡æ”¯æŒä¼˜ç§€**
- æ™ºèƒ½åˆ†è¯
- æ‹¼éŸ³æœç´¢
- ç¹ç®€è½¬æ¢

**5. åˆ†æç»Ÿè®¡**
- æœç´¢çƒ­è¯
- æ— ç»“æœæŸ¥è¯¢
- ç‚¹å‡»ç‡åˆ†æ

#### âŒ å±€é™æ€§

**1. éœ€è¦æ•°æ®åŒæ­¥**
```javascript
// æ¯æ¬¡å†…å®¹æ›´æ–°éƒ½è¦åŒæ­¥åˆ° Algolia
const index = client.initIndex('articles');
await index.saveObject({
  objectID: article.id,
  title: article.title,
  content: article.content
});
```

**2. æˆæœ¬é—®é¢˜**
- è¶…è¿‡å…è´¹é¢åº¦åè´¹ç”¨é«˜
- æ¯æ¬¡æœç´¢éƒ½è®¡è´¹

**3. æ•°æ®å†—ä½™**
- æ•°æ®åŒæ—¶å­˜åœ¨ä¸¤ä¸ªåœ°æ–¹
- éœ€è¦ä¿æŒä¸€è‡´æ€§

**4. é…ç½®å¤æ‚åº¦**
- éœ€è¦é…ç½®ç´¢å¼•è®¾ç½®
- éœ€è¦ç®¡ç† API Keys
- éœ€è¦è®¾ç½®åŒæ­¥æœºåˆ¶

---

## ğŸ”„ å®ç°å¤æ‚åº¦å¯¹æ¯”

### Supabase å®ç°ï¼ˆç®€å•ï¼‰

**æ­¥éª¤ 1ï¼šåˆ›å»ºæœç´¢ç´¢å¼•**ï¼ˆ5 åˆ†é’Ÿï¼‰
```sql
-- åˆ›å»ºå…¨æ–‡æœç´¢ç´¢å¼•
ALTER TABLE articles ADD COLUMN search_vector tsvector;

CREATE INDEX articles_search_idx ON articles USING GIN(search_vector);

-- è‡ªåŠ¨æ›´æ–°æœç´¢å‘é‡
CREATE FUNCTION articles_search_trigger() RETURNS trigger AS $$
BEGIN
  NEW.search_vector :=
    setweight(to_tsvector('english', COALESCE(NEW.title, '')), 'A') ||
    setweight(to_tsvector('english', COALESCE(NEW.content, '')), 'B');
  RETURN NEW;
END
$$ LANGUAGE plpgsql;

CREATE TRIGGER articles_search_update
BEFORE INSERT OR UPDATE ON articles
FOR EACH ROW EXECUTE FUNCTION articles_search_trigger();
```

**æ­¥éª¤ 2ï¼šåˆ›å»ºæœç´¢ API**ï¼ˆ10 åˆ†é’Ÿï¼‰
```typescript
// src/pages/api/search.ts
export const GET: APIRoute = async ({ url }) => {
  const query = url.searchParams.get('q');
  
  const { data } = await supabase
    .from('articles')
    .select('*')
    .textSearch('search_vector', query);
  
  return new Response(JSON.stringify(data));
};
```

**æ­¥éª¤ 3ï¼šå‰ç«¯æœç´¢ç»„ä»¶**ï¼ˆ30 åˆ†é’Ÿï¼‰
```astro
<!-- ç®€å•çš„æœç´¢æ¡† -->
<input type="search" id="search-input" placeholder="æœç´¢æ–‡ç« ..." />
<div id="search-results"></div>

<script>
  const input = document.getElementById('search-input');
  input.addEventListener('input', async (e) => {
    const query = e.target.value;
    const res = await fetch(`/api/search?q=${query}`);
    const results = await res.json();
    // æ˜¾ç¤ºç»“æœ
  });
</script>
```

**æ€»è®¡**ï¼šçº¦ **45 åˆ†é’Ÿ**

---

### Algolia å®ç°ï¼ˆä¸­ç­‰ï¼‰

**æ­¥éª¤ 1ï¼šå®‰è£…å’Œé…ç½®**ï¼ˆ15 åˆ†é’Ÿï¼‰
```bash
npm install algoliasearch
```

```typescript
// src/lib/algolia.ts
import algoliasearch from 'algoliasearch';

const client = algoliasearch(
  'YOUR_APP_ID',
  'YOUR_ADMIN_API_KEY'
);

export const index = client.initIndex('articles');
```

**æ­¥éª¤ 2ï¼šæ•°æ®åŒæ­¥**ï¼ˆ30 åˆ†é’Ÿï¼‰
```typescript
// åŒæ­¥æ‰€æœ‰æ–‡ç« åˆ° Algolia
async function syncToAlgolia() {
  const { data: articles } = await supabase
    .from('articles')
    .select('*');
  
  const algoliaObjects = articles.map(article => ({
    objectID: article.id,
    title: article.title,
    content: article.content,
    slug: article.slug,
    tags: article.tags
  }));
  
  await index.saveObjects(algoliaObjects);
}

// å®æ—¶åŒæ­¥æ–°æ–‡ç« 
// éœ€è¦åœ¨æ–‡ç« åˆ›å»º/æ›´æ–°æ—¶è°ƒç”¨
async function updateArticle(article) {
  await index.saveObject({
    objectID: article.id,
    ...article
  });
}
```

**æ­¥éª¤ 3ï¼šé…ç½®ç´¢å¼•è®¾ç½®**ï¼ˆ20 åˆ†é’Ÿï¼‰
```typescript
await index.setSettings({
  searchableAttributes: [
    'title',
    'content',
    'tags'
  ],
  attributesToRetrieve: [
    'title',
    'slug',
    'excerpt'
  ],
  customRanking: [
    'desc(views)',
    'desc(created_at)'
  ],
  // ä¸­æ–‡ä¼˜åŒ–
  queryLanguages: ['zh-cn'],
  indexLanguages: ['zh-cn']
});
```

**æ­¥éª¤ 4ï¼šå‰ç«¯é›†æˆ**ï¼ˆ30 åˆ†é’Ÿï¼‰
```typescript
import { instantsearch } from 'instantsearch.js';
import { searchBox, hits } from 'instantsearch.js/es/widgets';

const search = instantsearch({
  indexName: 'articles',
  searchClient
});

search.addWidgets([
  searchBox({ container: '#search-box' }),
  hits({ container: '#hits' })
]);

search.start();
```

**æ€»è®¡**ï¼šçº¦ **95 åˆ†é’Ÿ**ï¼Œä¸”éœ€è¦ç»´æŠ¤åŒæ­¥æœºåˆ¶

---

## ğŸ¯ é€‚ç”¨åœºæ™¯å»ºè®®

### é€‰æ‹© Supabase çš„æƒ…å†µ âœ…

**1. ä¸ªäººåšå®¢/å°å‹ç½‘ç«™**
```
æ–‡ç« æ•°é‡ï¼š< 1000 ç¯‡
æœˆè®¿é—®é‡ï¼š< 50,000
é¢„ç®—ï¼šå…è´¹æˆ–ä½é¢„ç®—
```

**2. æœç´¢é¢‘ç‡ä¸é«˜**
```
ç”¨æˆ·ä¸»è¦é€šè¿‡åˆ†ç±»/æ ‡ç­¾æµè§ˆ
æœç´¢åªæ˜¯è¾…åŠ©åŠŸèƒ½
```

**3. ç®€å•æœç´¢éœ€æ±‚**
```
åªéœ€è¦æ ‡é¢˜å’Œå†…å®¹æœç´¢
ä¸éœ€è¦å¤æ‚çš„è¿‡æ»¤å’Œæ’åº
```

**4. å¿«é€Ÿä¸Šçº¿**
```
å¸Œæœ›å¿«é€Ÿå®ç°æœç´¢åŠŸèƒ½
ä¸æƒ³èŠ±æ—¶é—´é…ç½®å¤æ‚ç³»ç»Ÿ
```

**5. æ•°æ®ä¸€è‡´æ€§è¦æ±‚é«˜**
```
å®æ—¶æ•°æ®æ›´æ–°
ä¸æƒ³ç»´æŠ¤åŒæ­¥æœºåˆ¶
```

---

### é€‰æ‹© Algolia çš„æƒ…å†µ âœ…

**1. å¤§å‹å†…å®¹ç½‘ç«™**
```
æ–‡ç« æ•°é‡ï¼š> 5000 ç¯‡
æœˆè®¿é—®é‡ï¼š> 100,000
æœ‰é¢„ç®—æ”¯æŒ
```

**2. æœç´¢æ˜¯æ ¸å¿ƒåŠŸèƒ½**
```
ç”¨æˆ·ä¸»è¦é€šè¿‡æœç´¢æŸ¥æ‰¾å†…å®¹
éœ€è¦æé€Ÿå“åº”ï¼ˆ< 50msï¼‰
æœç´¢å æµé‡çš„ 30%+
```

**3. é«˜çº§æœç´¢éœ€æ±‚**
```
éœ€è¦æ‹¼å†™çº é”™
éœ€è¦åŒä¹‰è¯æ”¯æŒ
éœ€è¦ Faceted Searchï¼ˆåˆ†é¢æœç´¢ï¼‰
éœ€è¦æœç´¢å»ºè®®/è‡ªåŠ¨å®Œæˆ
```

**4. å›½é™…åŒ–éœ€æ±‚**
```
å¤šè¯­è¨€æ”¯æŒ
ä¸­æ–‡åˆ†è¯å’Œæ‹¼éŸ³æœç´¢
```

**5. éœ€è¦æœç´¢åˆ†æ**
```
åˆ†ææœç´¢çƒ­è¯
ä¼˜åŒ–æœç´¢ä½“éªŒ
A/B æµ‹è¯•ä¸åŒæ’åºè§„åˆ™
```

---

## ğŸ’¡ æˆ‘çš„æ¨è

### å¯¹äº AstrOb åšå®¢é¡¹ç›®

**é˜¶æ®µ 1ï¼šä½¿ç”¨ Supabase**ï¼ˆæ¨èï¼‰â­â­â­â­â­

**ç†ç”±**ï¼š
1. âœ… **å®Œå…¨å…è´¹**ï¼Œæ— æˆæœ¬å‹åŠ›
2. âœ… **å¿«é€Ÿå®ç°**ï¼Œ45 åˆ†é’Ÿæå®š
3. âœ… **è¶³å¤Ÿå¥½ç”¨**ï¼Œå¯¹äºåšå®¢æœç´¢å®Œå…¨å¤Ÿç”¨
4. âœ… **æ•°æ®ä¸€è‡´**ï¼Œæ— éœ€ç»´æŠ¤åŒæ­¥
5. âœ… **å·²æœ‰ Supabase**ï¼Œæ— éœ€å¼•å…¥æ–°æœåŠ¡

**ä½•æ—¶è€ƒè™‘ Algolia**ï¼š
- æ–‡ç« æ•°é‡ > 5000 ç¯‡
- æœˆæœç´¢é‡ > 50,000 æ¬¡
- éœ€è¦ < 50ms å“åº”æ—¶é—´
- æœ‰é¢„ç®—ï¼ˆ$50+/æœˆï¼‰

---

## ğŸ”„ æ··åˆæ–¹æ¡ˆï¼ˆæœ€ä½³å®è·µï¼‰

**æ¨èç­–ç•¥**ï¼šå…ˆ Supabaseï¼Œå Algolia

```
ç¬¬ 1 é˜¶æ®µï¼ˆ0-6 ä¸ªæœˆï¼‰
â”œâ”€ ä½¿ç”¨ Supabase å…¨æ–‡æœç´¢
â”œâ”€ éªŒè¯æœç´¢åŠŸèƒ½çš„ä½¿ç”¨é¢‘ç‡
â”œâ”€ æ”¶é›†ç”¨æˆ·åé¦ˆ
â””â”€ è¯„ä¼°æ˜¯å¦éœ€è¦å‡çº§

ç¬¬ 2 é˜¶æ®µï¼ˆæ ¹æ®æ•°æ®å†³å®šï¼‰
â”œâ”€ å¦‚æœæœç´¢ä½¿ç”¨ç‡é«˜ï¼ˆ> 20%ï¼‰
â”œâ”€ ä¸”æµé‡å¢é•¿ï¼ˆ> 10ä¸‡/æœˆï¼‰
â””â”€ è€ƒè™‘è¿ç§»åˆ° Algolia

è¿ç§»æˆæœ¬ä½ï¼š
â”œâ”€ API å±‚æŠ½è±¡
â”œâ”€ å‰ç«¯ç»„ä»¶ç‹¬ç«‹
â””â”€ å¹³æ»‘è¿‡æ¸¡
```

---

## ğŸ“ å®ç°ä»£ç ç¤ºä¾‹

### Supabase å…¨æ–‡æœç´¢ï¼ˆæ¨èèµ·æ­¥ï¼‰

**å®Œæ•´å®ç°**ï¼š3 ä¸ªæ–‡ä»¶ï¼Œçº¦ 150 è¡Œä»£ç 

```sql
-- 1. æ•°æ®åº“é…ç½®ï¼ˆdatabase.sqlï¼‰
ALTER TABLE articles ADD COLUMN search_vector tsvector;
CREATE INDEX articles_search_idx ON articles USING GIN(search_vector);

CREATE OR REPLACE FUNCTION articles_search_trigger() RETURNS trigger AS $$
BEGIN
  NEW.search_vector :=
    setweight(to_tsvector('english', COALESCE(NEW.title, '')), 'A') ||
    setweight(to_tsvector('english', COALESCE(NEW.content, '')), 'B') ||
    setweight(to_tsvector('english', COALESCE(NEW.excerpt, '')), 'C');
  RETURN NEW;
END
$$ LANGUAGE plpgsql;

CREATE TRIGGER articles_search_update
BEFORE INSERT OR UPDATE ON articles
FOR EACH ROW EXECUTE FUNCTION articles_search_trigger();
```

```typescript
// 2. API ç«¯ç‚¹ï¼ˆsrc/pages/api/search.tsï¼‰
import type { APIRoute } from 'astro';
import { supabase } from '@/lib/supabase';

export const prerender = false;

export const GET: APIRoute = async ({ url }) => {
  const query = url.searchParams.get('q');
  const limit = parseInt(url.searchParams.get('limit') || '10');
  
  if (!query) {
    return new Response(JSON.stringify({ results: [] }), {
      headers: { 'Content-Type': 'application/json' }
    });
  }

  try {
    const { data, error } = await supabase
      .from('articles')
      .select('id, title, slug, excerpt, created_at')
      .textSearch('search_vector', query, {
        type: 'websearch',
        config: 'english'
      })
      .limit(limit);

    if (error) throw error;

    return new Response(JSON.stringify({ 
      results: data,
      count: data.length 
    }), {
      headers: { 'Content-Type': 'application/json' }
    });
  } catch (error) {
    return new Response(JSON.stringify({ 
      error: 'Search failed',
      results: [] 
    }), {
      status: 500,
      headers: { 'Content-Type': 'application/json' }
    });
  }
};
```

```astro
<!-- 3. æœç´¢ç»„ä»¶ï¼ˆsrc/components/Search.astroï¼‰ -->
<div class="search-container">
  <input 
    type="search" 
    id="search-input" 
    placeholder="æœç´¢æ–‡ç« ..."
    class="search-input"
  />
  <div id="search-results" class="search-results hidden"></div>
</div>

<style>
  .search-container { position: relative; }
  .search-input {
    width: 100%;
    padding: 0.75rem;
    border: 2px solid #e5e7eb;
    border-radius: 8px;
    font-size: 1rem;
  }
  .search-results {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    max-height: 400px;
    overflow-y: auto;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    margin-top: 0.5rem;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  }
  .search-results.hidden { display: none; }
  .search-result-item {
    padding: 1rem;
    border-bottom: 1px solid #f3f4f6;
    cursor: pointer;
  }
  .search-result-item:hover { background: #f9fafb; }
</style>

<script>
  const input = document.getElementById('search-input') as HTMLInputElement;
  const results = document.getElementById('search-results') as HTMLDivElement;
  
  let debounceTimer: number;
  
  input.addEventListener('input', (e) => {
    const query = (e.target as HTMLInputElement).value.trim();
    
    clearTimeout(debounceTimer);
    
    if (!query) {
      results.classList.add('hidden');
      return;
    }
    
    debounceTimer = setTimeout(async () => {
      try {
        const res = await fetch(`/api/search?q=${encodeURIComponent(query)}`);
        const data = await res.json();
        
        if (data.results.length === 0) {
          results.innerHTML = '<div class="p-4 text-gray-500">æœªæ‰¾åˆ°ç›¸å…³æ–‡ç« </div>';
        } else {
          results.innerHTML = data.results.map((item: any) => `
            <a href="/${item.slug}" class="search-result-item block">
              <div class="font-semibold">${item.title}</div>
              <div class="text-sm text-gray-600 mt-1">${item.excerpt || ''}</div>
            </a>
          `).join('');
        }
        
        results.classList.remove('hidden');
      } catch (error) {
        console.error('Search error:', error);
      }
    }, 300);
  });
  
  // ç‚¹å‡»å¤–éƒ¨å…³é—­
  document.addEventListener('click', (e) => {
    if (!input.contains(e.target as Node) && !results.contains(e.target as Node)) {
      results.classList.add('hidden');
    }
  });
</script>
```

**æ€»ç»“**ï¼šçº¦ 150 è¡Œä»£ç ï¼Œ45 åˆ†é’Ÿå®Œæˆ âœ…

---

## ğŸ“Š å†³ç­–æ ‘

```
ä½ çš„åšå®¢æœç´¢éœ€æ±‚
    â†“
æ˜¯å¦éœ€è¦æé€Ÿå“åº”ï¼ˆ< 20msï¼‰ï¼Ÿ
    â”œâ”€ å¦ â†’ Supabase âœ…
    â””â”€ æ˜¯ â†’ ç»§ç»­
        â†“
æ˜¯å¦æœ‰é¢„ç®—ï¼ˆ> $50/æœˆï¼‰ï¼Ÿ
    â”œâ”€ å¦ â†’ Supabase âœ…
    â””â”€ æ˜¯ â†’ ç»§ç»­
        â†“
æ˜¯å¦éœ€è¦é«˜çº§åŠŸèƒ½ï¼Ÿ
ï¼ˆæ‹¼å†™çº é”™ã€åŒä¹‰è¯ã€åˆ†é¢æœç´¢ï¼‰
    â”œâ”€ å¦ â†’ Supabase âœ…
    â””â”€ æ˜¯ â†’ Algolia
```

---

## ğŸ¯ æœ€ç»ˆå»ºè®®

### å¯¹äºä½ çš„ AstrOb é¡¹ç›®

**ç«‹å³ä½¿ç”¨ï¼šSupabase å…¨æ–‡æœç´¢** â­â­â­â­â­

**ç†ç”±**ï¼š
1. ä½ å·²ç»æœ‰ Supabase
2. ä¸ªäººåšå®¢ï¼Œæµé‡ä¸å¤§
3. å®Œå…¨å…è´¹
4. 45 åˆ†é’Ÿå®ç°
5. å®Œå…¨å¤Ÿç”¨

**æœªæ¥è€ƒè™‘ï¼šAlgolia**ï¼ˆå½“æ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ—¶ï¼‰
- æ–‡ç«  > 5000 ç¯‡
- æœˆæœç´¢ > 50,000 æ¬¡
- æœ‰ç¨³å®šæ”¶å…¥æ”¯æŒæˆæœ¬

---

æƒ³è¦æˆ‘å¸®ä½ å®ç° Supabase å…¨æ–‡æœç´¢å—ï¼Ÿåªéœ€è¦è¯´ï¼š
- **"å¸®æˆ‘å®ç°æœç´¢åŠŸèƒ½"**
- **"æˆ‘æƒ³çœ‹çœ‹ Algolia å®ç°"**
- **"å…ˆåšç®€å•çš„æœç´¢"**

æˆ‘æ¥å¸®ä½ å¿«é€Ÿæå®šï¼ğŸš€

