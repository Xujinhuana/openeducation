# 🚀 部署快速参考卡片

## 📋 三种部署方式对比

| 项目 | 本地开发 | GitHub Pages | Vercel |
|------|---------|--------------|--------|
| **访问地址** | `localhost:4321` | `username.github.io` | `xxx.vercel.app` |
| **base 路径** | `/openeducation/` | `/openeducation/` | `/` |
| **启动方式** | `dev-local.bat` | `git push` | `vercel --prod` |
| **构建命令** | `npm run dev` | `npm run build:github` | `npm run build:github` |

---

## ⚙️ 必需的环境变量

### 本地开发
```bash
SPACESHIP_AUTHOR=My Vault
PWD=F:\IOTO-Doc\AstrOb
# base 路径默认为 /openeducation/（与 GitHub 一致）
```

### GitHub Pages
```bash
SPACESHIP_BASE=/openeducation/
SPACESHIP_SITE=https://your-username.github.io
SPACESHIP_AUTHOR=My Vault
```

### Vercel
```bash
SPACESHIP_BASE=/
SPACESHIP_SITE=https://your-project.vercel.app
SPACESHIP_AUTHOR=My Vault
```

---

## 🎯 快速部署步骤

### GitHub Pages（3 步）

1. **配置 workflow**
   ```yaml
   # .github/workflows/deploy.yml
   env:
     SPACESHIP_BASE: /openeducation/
     SPACESHIP_AUTHOR: My Vault
   ```

2. **启用 Pages**
   ```
   Settings → Pages → Source: GitHub Actions
   ```

3. **推送代码**
   ```bash
   git push origin main
   ```

---

### Vercel（3 步）

1. **导入项目**
   ```
   vercel.com → Add New → Project
   ```

2. **设置环境变量**
   ```
   SPACESHIP_BASE = /
   SPACESHIP_AUTHOR = My Vault
   ```

3. **点击 Deploy**

---

## ⚠️ 最常见的 3 个问题

### 1. 404 错误
**原因**: base 路径不匹配  
**解决**: 检查 `SPACESHIP_BASE` 是否正确

### 2. CSS 丢失
**原因**: 资源路径错误  
**解决**: 确保 `base` 配置正确，清理缓存重新构建

### 3. 构建失败
**原因**: 使用了错误的构建命令  
**解决**: 使用 `build:github` 而不是 `build`

---

## 🔧 故障排查命令

```bash
# 检查环境变量
echo %SPACESHIP_BASE%

# 本地测试构建
npm run build:github

# 预览构建结果
npm run preview

# 清理缓存
rmdir /s /q .astro
rmdir /s /q node_modules\.cache

# 重新安装依赖
npm install
```

---

## 📞 需要帮助？

查看详细文档：
- **本地开发**: `dev-local.bat`
- **环境配置**: `环境配置说明.md`
- **部署详情**: `部署配置指南.md`
- **问题总结**: `4-Outcome/日常工作/总结/AstrOb项目问题解决总结.md`

---

**快速提示**: 如果遇到问题，90% 的情况是环境变量设置错误！

