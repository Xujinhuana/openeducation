# ğŸš€ éƒ¨ç½²ç»ˆææ–¹æ¡ˆ

## âš ï¸ æ ¸å¿ƒé—®é¢˜

ä½ çš„é¡¹ç›®ä½¿ç”¨äº† `astro-spaceship` ä¸»é¢˜ï¼Œè¯¥ä¸»é¢˜ï¼š
1. **å¼ºåˆ¶ä½¿ç”¨ server æ¨¡å¼**ï¼ˆå³ä½¿è®¾ç½®äº† `static`ï¼‰
2. **æ‰€æœ‰é¡µé¢éƒ½ä¾èµ–ä¸»é¢˜ç»„ä»¶**
3. **é¡µé¢åŒ…å« `export const prerender = true;`**ï¼ˆéœ€è¦ adapterï¼‰

è¿™å¯¼è‡´ï¼š
- âŒ GitHub Pages **æ— æ³•éƒ¨ç½²**ï¼ˆä¸æ”¯æŒ SSR/adapterï¼‰
- âŒ ç§»é™¤ä¸»é¢˜å**æ²¡æœ‰é¡µé¢å†…å®¹**
- âŒ ç§»é™¤ `prerender` ä¼šç ´å Vercel æ„å»º

---

## ğŸ’¡ æ¨èæ–¹æ¡ˆï¼šåªä½¿ç”¨ Vercel

### ä¸ºä»€ä¹ˆï¼Ÿ

| åŠŸèƒ½ | Vercel | GitHub Pages |
|------|--------|--------------|
| **SSR æ”¯æŒ** | âœ… å®Œæ•´æ”¯æŒ | âŒ ä¸æ”¯æŒ |
| **Supabase** | âœ… å®Œæ•´åŠŸèƒ½ | âŒ ä¸å·¥ä½œ |
| **astro-spaceship** | âœ… å®Œç¾å…¼å®¹ | âŒ ä¸å…¼å®¹ |
| **è‡ªåŠ¨éƒ¨ç½²** | âœ… | âœ… |
| **è‡ªå®šä¹‰åŸŸå** | âœ… å…è´¹ | âœ… å…è´¹ |
| **HTTPS** | âœ… è‡ªåŠ¨ | âœ… è‡ªåŠ¨ |
| **æ„å»ºé€Ÿåº¦** | âš¡ å¿« | ğŸŸ¡ ä¸­ç­‰ |
| **å…è´¹é¢åº¦** | âœ… å……è¶³ | âœ… æ— é™ |

**ç»“è®º**ï¼šå¯¹äºä½¿ç”¨ `astro-spaceship` + Supabase çš„é¡¹ç›®ï¼Œ**Vercel æ˜¯å”¯ä¸€åˆé€‚çš„é€‰æ‹©**ã€‚

---

## âœ… æ–¹æ¡ˆ Aï¼šä»… Vercel éƒ¨ç½²ï¼ˆæ¨èï¼‰â­â­â­â­â­

### é…ç½®æ­¥éª¤

#### 1. ç¦ç”¨ GitHub Pages

åˆ é™¤æˆ–ç¦ç”¨ `.github/workflows/deploy.yml`ï¼š

```bash
# æ–¹å¼ 1ï¼šåˆ é™¤æ–‡ä»¶
rm .github/workflows/deploy.yml

# æ–¹å¼ 2ï¼šé‡å‘½åä¸º .bakï¼ˆä¿ç•™å¤‡ä»½ï¼‰
mv .github/workflows/deploy.yml .github/workflows/deploy.yml.bak
```

#### 2. æ¸…ç†é…ç½®æ–‡ä»¶

åˆ é™¤ä¸éœ€è¦çš„é™æ€é…ç½®ï¼š
```bash
rm astro.config.static.ts
```

#### 3. ç®€åŒ– vercel.json

```json
{
  "buildCommand": "npm run build",
  "outputDirectory": ".vercel/output",
  "framework": "astro"
}
```

#### 4. æ›´æ–° package.json

```json
{
  "scripts": {
    "dev": "astro dev",
    "build": "astro build",
    "preview": "astro preview"
  }
}
```

#### 5. é…ç½® Vercel ç¯å¢ƒå˜é‡

åœ¨ Vercel Dashboard â†’ Settings â†’ Environment Variablesï¼š
```
PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co
PUBLIC_SUPABASE_ANON_KEY=your-anon-key
```

#### 6. æ¨é€ä»£ç 

```bash
git add .
git commit -m "chore: ç®€åŒ–éƒ¨ç½²é…ç½®ï¼Œä»…ä½¿ç”¨ Vercel"
git push origin main
```

### ä¼˜åŠ¿

- âœ… **é…ç½®ç®€å•**ï¼šåªéœ€ä¸€ä¸ªé…ç½®æ–‡ä»¶
- âœ… **å®Œæ•´åŠŸèƒ½**ï¼šSupabase æ‰€æœ‰åŠŸèƒ½å¯ç”¨
- âœ… **ç»´æŠ¤è½»æ¾**ï¼šæ— éœ€ç®¡ç†ä¸¤å¥—é…ç½®
- âœ… **æ„å»ºç¨³å®š**ï¼šä¸ä¼šæœ‰ adapter å†²çª
- âœ… **è‡ªåŠ¨éƒ¨ç½²**ï¼šæ¨é€å³éƒ¨ç½²
- âœ… **å…è´¹å……è¶³**ï¼šä¸ªäººé¡¹ç›®å®Œå…¨å¤Ÿç”¨

### è®¿é—®æ–¹å¼

**Vercel åŸŸå**ï¼š
```
https://your-project.vercel.app
```

**è‡ªå®šä¹‰åŸŸå**ï¼ˆå¯é€‰ï¼‰ï¼š
```
åœ¨ Vercel Dashboard â†’ Settings â†’ Domains æ·»åŠ 
```

---

## ğŸ”„ æ–¹æ¡ˆ Bï¼šVercel + Cloudflare Pagesï¼ˆå¤‡ç”¨ï¼‰

å¦‚æœä½ ç¡®å®éœ€è¦å¤‡ä»½éƒ¨ç½²ï¼š

### ç‰¹ç‚¹

- **ä¸»éƒ¨ç½²**ï¼šVercelï¼ˆå®Œæ•´åŠŸèƒ½ï¼‰
- **å¤‡ä»½**ï¼šCloudflare Pagesï¼ˆæ”¯æŒ SSRï¼‰
- Cloudflare Pages æ”¯æŒ Astro SSRï¼ˆé€šè¿‡ adapterï¼‰

### é…ç½®

```bash
# å®‰è£… Cloudflare adapter
npm install @astrojs/cloudflare

# åˆ›å»º cloudflare é…ç½®
# astro.config.cloudflare.ts
```

ä½†è€å®è¯´ï¼Œ**ä¸€ä¸ª Vercel å°±å¤Ÿäº†**ã€‚

---

## âŒ ä¸ºä»€ä¹ˆä¸æ¨è GitHub Pagesï¼Ÿ

### æŠ€æœ¯é™åˆ¶

1. **ä¸æ”¯æŒ SSR**
   - åªèƒ½æ‰˜ç®¡é™æ€ HTML/CSS/JS
   - æ— æ³•è¿è¡ŒæœåŠ¡å™¨ç«¯ä»£ç 

2. **ä¸æ”¯æŒ API è·¯ç”±**
   - `/api/*` è·¯ç”±å…¨éƒ¨ 404
   - Supabase åŠŸèƒ½å®Œå…¨ä¸å·¥ä½œ

3. **ä¸æ”¯æŒ adapter**
   - æ— æ³•ä½¿ç”¨ `@astrojs/vercel` ç­‰ adapter
   - `astro-spaceship` ä¾èµ–çš„åŠŸèƒ½ä¸å¯ç”¨

### é¡¹ç›®é™åˆ¶

ä½ çš„é¡¹ç›®ï¼š
- âœ… ä½¿ç”¨äº† `astro-spaceship` ä¸»é¢˜ï¼ˆéœ€è¦ server æ¨¡å¼ï¼‰
- âœ… é›†æˆäº† Supabaseï¼ˆéœ€è¦ API è·¯ç”±ï¼‰
- âœ… æ‰€æœ‰é¡µé¢éƒ½æœ‰ `export const prerender = true;`

**è¿™äº›éƒ½ä¸ GitHub Pages ä¸å…¼å®¹ã€‚**

---

## ğŸ¯ å®æ–½å»ºè®®

### ç«‹å³æ‰§è¡Œï¼šåˆ‡æ¢åˆ°çº¯ Vercel éƒ¨ç½²

```bash
# 1. ç¦ç”¨ GitHub Pages workflow
mv .github/workflows/deploy.yml .github/workflows/deploy.yml.disabled

# 2. åˆ é™¤é™æ€é…ç½®
rm astro.config.static.ts

# 3. æ¢å¤ Vercel æ„å»ºå‘½ä»¤ï¼ˆç§»é™¤ rm -rfï¼‰
# ç¼–è¾‘ vercel.jsonï¼š
{
  "buildCommand": "npm run build"
}

# 4. ç®€åŒ– package.json scripts
{
  "scripts": {
    "dev": "astro dev",
    "build": "astro build",
    "preview": "astro preview"
  }
}

# 5. æäº¤å¹¶æ¨é€
git add .
git commit -m "chore: åˆ‡æ¢åˆ°çº¯ Vercel éƒ¨ç½²"
git push origin main
```

---

## ğŸ“Š æˆæœ¬å¯¹æ¯”

### Vercel å…è´¹å¥—é¤

```
âœ… 100 GB å¸¦å®½/æœˆ
âœ… æ— é™åˆ¶çš„æ„å»ºæ—¶é—´
âœ… è‡ªåŠ¨ HTTPS
âœ… å…¨çƒ CDN
âœ… æ— åŸŸåé™åˆ¶
âœ… å›¢é˜Ÿåä½œï¼ˆæœ€å¤š 3 äººï¼‰

è¶³å¤Ÿä¸ªäººåšå®¢ä½¿ç”¨ï¼
```

### GitHub Pages å…è´¹å¥—é¤

```
âœ… 100 GB å¸¦å®½/æœˆ
âœ… è‡ªåŠ¨ HTTPS
âœ… æ— é™åˆ¶å­˜å‚¨

ä½†ä¸æ”¯æŒ SSR å’Œä½ çš„é¡¹ç›®éœ€æ±‚
```

---

## ğŸ”§ æ¸…ç†è„šæœ¬

å¦‚æœä½ åŒæ„åˆ‡æ¢åˆ°çº¯ Vercelï¼Œè¿è¡Œä»¥ä¸‹è„šæœ¬ï¼š

```bash
#!/bin/bash
# cleanup-for-vercel.sh

echo "ğŸ§¹ æ¸…ç†ä¸å¿…è¦çš„é…ç½®..."

# ç¦ç”¨ GitHub Pages workflow
if [ -f ".github/workflows/deploy.yml" ]; then
  mv .github/workflows/deploy.yml .github/workflows/deploy.yml.disabled
  echo "âœ… å·²ç¦ç”¨ GitHub Pages workflow"
fi

# åˆ é™¤é™æ€é…ç½®
if [ -f "astro.config.static.ts" ]; then
  rm astro.config.static.ts
  echo "âœ… å·²åˆ é™¤é™æ€é…ç½®æ–‡ä»¶"
fi

# æ›´æ–° .gitignore
if ! grep -q "^deploy.yml.disabled" .gitignore; then
  echo "deploy.yml.disabled" >> .gitignore
  echo "âœ… å·²æ›´æ–° .gitignore"
fi

echo ""
echo "âœ… æ¸…ç†å®Œæˆï¼"
echo ""
echo "ğŸ“ ä¸‹ä¸€æ­¥ï¼š"
echo "1. ç¼–è¾‘ vercel.jsonï¼Œä¿®æ”¹ buildCommand ä¸º 'npm run build'"
echo "2. ç®€åŒ– package.json scriptsï¼ˆç§»é™¤ build:github å’Œ build:vercelï¼‰"
echo "3. git add . && git commit -m 'chore: ç®€åŒ–éƒ¨ç½²é…ç½®'"
echo "4. git push origin main"
```

---

## âœ… æœ€ç»ˆé…ç½®æ–‡ä»¶

### `astro.config.ts`ï¼ˆå”¯ä¸€é…ç½®ï¼‰

```typescript
import { defineConfig } from 'astro/config';
import { astroSpaceship } from 'astro-spaceship';
import vercel from '@astrojs/vercel/serverless';
import websiteConfig from 'astro-spaceship/config';

export default defineConfig({
  output: 'server',
  adapter: vercel(),
  integrations: [astroSpaceship(websiteConfig)],
  devToolbar: { enabled: false },
  site: process.env.SPACESHIP_SITE || 'http://localhost:4321',
  base: process.env.SPACESHIP_BASE || '/openeducation/'
});
```

### `vercel.json`ï¼ˆç®€åŒ–ï¼‰

```json
{
  "buildCommand": "npm run build",
  "outputDirectory": ".vercel/output",
  "framework": "astro"
}
```

### `package.json`ï¼ˆç®€åŒ– scriptsï¼‰

```json
{
  "scripts": {
    "dev": "astro dev",
    "build": "astro build",
    "preview": "astro preview"
  }
}
```

---

## ğŸ’¬ FAQ

### Q: æˆ‘ä¸€å®šè¦æ”¾å¼ƒ GitHub Pages å—ï¼Ÿ

A: å¯¹äºä½ çš„é¡¹ç›®ï¼Œ**æ˜¯çš„**ã€‚åŸå› ï¼š
- ä½ ä½¿ç”¨äº† `astro-spaceship` ä¸»é¢˜ï¼ˆéœ€è¦ SSRï¼‰
- ä½ é›†æˆäº† Supabaseï¼ˆéœ€è¦ API è·¯ç”±ï¼‰
- GitHub Pages ä¸æ”¯æŒè¿™äº›åŠŸèƒ½

### Q: Vercel å…è´¹é¢åº¦å¤Ÿç”¨å—ï¼Ÿ

A: **ç»å¯¹å¤Ÿç”¨**ã€‚å…è´¹å¥—é¤ï¼š
- 100 GB å¸¦å®½/æœˆ
- æ— é™æ„å»ºæ—¶é—´
- æ— é™éƒ¨ç½²æ¬¡æ•°

é™¤éä½ çš„åšå®¢æ¯æœˆæœ‰ **ä¸Šç™¾ä¸‡è®¿é—®é‡**ï¼Œå¦åˆ™ä¸ä¼šè¶…å‡ºã€‚

### Q: èƒ½ç”¨è‡ªå®šä¹‰åŸŸåå—ï¼Ÿ

A: **å¯ä»¥**ã€‚Vercel å…è´¹æ”¯æŒè‡ªå®šä¹‰åŸŸåï¼š
1. åœ¨ Vercel Dashboard â†’ Settings â†’ Domains
2. æ·»åŠ ä½ çš„åŸŸå
3. æŒ‰æç¤ºé…ç½® DNS

### Q: æ•°æ®ä¼šä¸¢å¤±å—ï¼Ÿ

A: **ä¸ä¼š**ã€‚ä½ çš„ï¼š
- âœ… ä»£ç åœ¨ GitHubï¼ˆä¸å˜ï¼‰
- âœ… å†…å®¹åœ¨ Markdownï¼ˆä¸å˜ï¼‰
- âœ… Supabase æ•°æ®ï¼ˆä¸å˜ï¼‰

åªæ˜¯æ”¹å˜äº†**éƒ¨ç½²æ–¹å¼**ã€‚

---

## ğŸ¯ æ€»ç»“

### å½“å‰é—®é¢˜

```
âŒ GitHub Pagesï¼šä¸å…¼å®¹ astro-spaceship + Supabase
âŒ åŒé‡é…ç½®ï¼šç»´æŠ¤å¤æ‚ï¼Œå®¹æ˜“å‡ºé”™
âŒ åŠŸèƒ½ç¼ºå¤±ï¼šGitHub Pages ç‰ˆæœ¬åŠŸèƒ½ä¸å®Œæ•´
```

### æ¨èæ–¹æ¡ˆ

```
âœ… åªç”¨ Vercelï¼šé…ç½®ç®€å•ï¼ŒåŠŸèƒ½å®Œæ•´
âœ… å•ä¸€é…ç½®ï¼šæ˜“äºç»´æŠ¤
âœ… å®Œæ•´åŠŸèƒ½ï¼šSupabase æ­£å¸¸å·¥ä½œ
âœ… å…è´¹å……è¶³ï¼šä¸ªäººåšå®¢å®Œå…¨å¤Ÿç”¨
```

---

## ğŸš€ ç«‹å³è¡ŒåŠ¨

æˆ‘å¯ä»¥å¸®ä½ ï¼š

1. **æ–¹æ¡ˆ Aï¼šåˆ‡æ¢åˆ°çº¯ Vercel**
   - åˆ é™¤ GitHub Pages é…ç½®
   - ç®€åŒ–é¡¹ç›®ç»“æ„
   - ä¸€æ¬¡é…ç½®ï¼Œæ°¸ä¹…ä½¿ç”¨

2. **æ–¹æ¡ˆ Bï¼šä¿æŒç°çŠ¶ï¼ˆä¸æ¨èï¼‰**
   - ç»§ç»­å¤„ç†éƒ¨ç½²é”™è¯¯
   - ç»´æŠ¤ä¸¤å¥—é…ç½®
   - GitHub Pages ç‰ˆæœ¬åŠŸèƒ½ä¸å®Œæ•´

**ä½ é€‰æ‹©å“ªä¸ªæ–¹æ¡ˆï¼Ÿ**

å‘Šè¯‰æˆ‘ï¼š
- "åˆ‡æ¢åˆ° Vercel" - æˆ‘å¸®ä½ æ‰§è¡Œæ¸…ç†è„šæœ¬
- "æˆ‘æƒ³ç»§ç»­å°è¯•" - æˆ‘ä¼šç»§ç»­å¸®ä½ è°ƒè¯•ï¼ˆä½†å¯èƒ½å¾ˆéš¾è§£å†³ï¼‰

