---
import { getStaticPathsFactory, type Props } from "astro-spaceship/components/Article/utils/get-static-paths.ts";
import Page from 'astro-spaceship/components/Article/Page.astro';
import ThemeToggle from '@/components/ThemeToggle.astro';
import ThemeSelector from '@/components/ThemeSelector.astro';

import '@/styles/global.css';
import config from 'astro-spaceship/config';


export type { Props };

// ğŸ”¥ å…³é”®ï¼šåœ¨ server æ¨¡å¼ä¸‹ï¼Œè®©è¿™ä¸ªé¡µé¢é¢„æ¸²æŸ“ä¸ºé™æ€ HTML
export const prerender = true;

export const getStaticPaths = getStaticPathsFactory({
  config,
});

---

<Page {...Astro.props}>
  <Fragment slot="head">
    <!-- å¼•å…¥ Alpine.js -->
    <script>
      import Alpine from 'alpinejs';
      window.Alpine = Alpine;
      Alpine.start();
    </script>
    
    <!-- ä¸»é¢˜åˆå§‹åŒ–è„šæœ¬ï¼ˆé˜²æ­¢é—ªçƒï¼‰ -->
    <script is:inline>
      // åœ¨é¡µé¢åŠ è½½å‰ç«‹å³æ‰§è¡Œï¼Œé˜²æ­¢ä¸»é¢˜å’Œé¢œè‰²æ¨¡å¼é—ªçƒ
      (function() {
        // åˆå§‹åŒ–é¢œè‰²æ¨¡å¼ï¼ˆäº®è‰²/æš—è‰²ï¼‰
        const colorMode = localStorage.getItem('colorMode') || 
          (window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
        
        if (colorMode === 'dark') {
          document.documentElement.classList.add('dark');
          document.documentElement.classList.remove('light');
        } else {
          document.documentElement.classList.remove('dark');
          document.documentElement.classList.add('light');
        }
        
        // åˆå§‹åŒ–ä¸»é¢˜
        const theme = localStorage.getItem('selectedTheme') || 'default';
        document.documentElement.setAttribute('data-active-theme', theme);
      })();
    </script>
    
    <!-- æ³¨å…¥æ–‡ç« ç»Ÿè®¡ç»„ä»¶ -->
    <script>
      import '@/scripts/inject-article-stats.ts';
    </script>
  </Fragment>
</Page>
<ThemeToggle />
<ThemeSelector />
